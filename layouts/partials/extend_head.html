{{- /* Head custom content area start */ -}}

{{- /* 添加KaTeX数学公式支持 */ -}}
{{ if or .Params.math .Site.Params.math }}
{{ partial "math.html" . }}
{{ end }}


{{- /* 添加Mermaid支持 - 检测页面是否包含mermaid代码块 */ -}}
{{- $hasMermaid := false }}
{{- if .Content }}
  {{- if findRE "```mermaid" .Content }}
    {{- $hasMermaid = true }}
  {{- end }}
{{- end }}
{{- if $hasMermaid }}
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({ 
    startOnLoad: true, 
    theme: 'default',
    securityLevel: 'loose'
  });
</script>
{{- end }}
{{- /* Head custom content area end */ -}}

{{- /* 思源宋体 - 优雅的开源衬线字体，适合学术/技术博客 */ -}}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
