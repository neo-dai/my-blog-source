{{- /* Head custom content area start */ -}}

{{- /* 添加KaTeX数学公式支持 */ -}}
{{ if or .Params.math .Site.Params.math }}
{{ partial "math.html" . }}
{{ end }}


{{- /* 添加Mermaid支持 - 检测页面是否包含mermaid代码块 */ -}}
{{- $hasMermaid := false }}
{{- if .Content }}
  {{- if findRE "```mermaid" .Content }}
    {{- $hasMermaid = true }}
  {{- end }}
{{- end }}
{{- if $hasMermaid }}
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({ 
    startOnLoad: true, 
    theme: 'default',
    securityLevel: 'loose'
  });
</script>
{{- end }}
{{- /* Head custom content area end */ -}}

